{% extends "webapp/base.html" %}

{% block content %}
<div class="container-fluid mt-4">
    <h3 class="text-center"> Welcome to the Dashboard, {{ user }}! </h3>

    <hr>

    <div class="d-flex justify-content-center mb-3">
        <a class="btn btn-outline-primary btn-md mr-2" href="{% url 'create_record' %}">
            Create a new record&nbsp;<i class="fa fa-plus-circle" aria-hidden="true"></i>
        </a>
        <a class="btn btn-secondary btn-md ml-2" href="{% url 'dashboard' %}">
            {% comment %} Return&nbsp;<i class="fa fa-arrow-left" aria-hidden="true"></i> {% endcomment %}
        </a>
    </div>

    <hr>

    <div class="table-responsive">
        <table class="table table-striped table-hover table-bordered w-100">
            <thead class="table-dark">
                <tr>
                    <th scope="col">ID</th>
                    <th scope="col">Full Name</th>
                    <th scope="col">Email</th>
                    <th scope="col">Phone</th>
                    <th scope="col">Address</th>
                    <th scope="col">City</th>
                    <th scope="col">Province</th>
                    <th scope="col">Country</th>
                    <th scope="col">Date Joined</th>
                    <th scope="col">View</th>
                </tr>
            </thead>
            <tbody>
                {% if records %}
                    {% for record in records %}
                        <tr>
                            <td>{{ record.id }}</td>
                            <td>{{ record.first_name }} {{ record.last_name }}</td>
                            <td>{{ record.email }}</td>
                            <td>{{ record.phone }}</td>
                            <td>{{ record.address }}</td>
                            <td>{{ record.city }}</td>
                            <td>{{ record.province }}</td>
                            <td>{{ record.country }}</td>
                            <td>{{ record.creation_date }}</td>
                            <td>
                                <a class="btn btn-info btn-sm" href="{% url 'record' record.id %}">
                                    View&nbsp;<i class="fa fa-eye" aria-hidden="true"></i>
                                </a>
                            </td>
                        </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="10" class="text-center">No records found</td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</div>

<style>
    .table-fit {
        width: 100% !important;
        table-layout: auto;
    }

    .table-fit th, .table-fit td {
        word-wrap: break-word;
    }
</style>
{% endblock %}
